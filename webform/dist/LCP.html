<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="LCP" ng-controller="questionnaire">
<head>
    <title>Questionnaire for reporting on Combustion Plants under Art 72 of the Industrial Emissions Directive</title>
    <meta name="Publisher" content="EEA, The European Environment Agency" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!-- EIONET 2007 styles -->
    <link type="text/css" rel="stylesheet" media="screen" href="https://www.eionet.europa.eu/styles/eionet2007/screen.css" title="Eionet 2007 style" />
    <link rel="stylesheet" type="text/css" href="https://www.eionet.europa.eu/styles/eionet2007/print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="https://www.eionet.europa.eu/styles/eionet2007/handheld.css" media="handheld" />
    <!-- Bootstrap style -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
   <!-- Handson -->
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handsontable/0.35.0/handsontable.full.min.js"></script>
    <link rel="stylesheet" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/handsontable/0.35.0/handsontable.full.min.css">
    <!-- End of Handson -->
    <!-- Angular javascript fiels -->

    <script src="bundle.js"></script>
    <link rel="stylesheet" href="notification.css"/>
    <link rel="stylesheet" href="style.css"/>

</head>
<body id="beginning" class="fullscreen">
    <div class="ng-modal-overlay animate-show" ng-show="showInfo || $parent.loadingTracker.active()"></div>
    <div id="container">
        <div id="toolribbon">
            <div id="lefttools">
                <a id="eealink" href="http://www.eea.europa.eu/">EEA</a>
                <a id="ewlink" href="http://www.ewindows.eu.org/">EnviroWindows</a>
            </div>
            <div id="righttools">
                    <a id="printlink" title="Print this page" href="javascript:this.print();"><span>Print</span></a>
            </div>

        </div> <!-- toolribbon -->

        <div id="pagehead">
            <a href="/" accesskey="1"><img src="/images/eea-print-logo.gif" alt="Logo" id="logo" /></a>
            <div id="networktitle">Eionet</div>
            <div id="sitetitle">European Environment Information and Observation Network</div>
            <div id="sitetagline">Web questionnaires</div>
        </div>  <!-- page head -->

        <div id="menuribbon"></div>
        <div class="breadcrumbtrail">
            <div class="breadcrumbhead">You are here:</div>
            <div class="breadcrumbitem eionetaccronym"><a href="http://www.eionet.europa.eu/">Eionet</a></div>
            <div class="breadcrumbitem">CDR</div>
            <div class="breadcrumbitemlast">WebForm</div>
            <div class="breadcrumbtail"></div>
        </div>
        <div id="workarea">

        <div style="display:none" language-changer></div>

        <div ng-form="appForm" novalidate class="css-form" ng-class="{ 'submitted' : submitted }" block-form-navigation>

        <div class="important-msg" ng-show="isIE9">
            You are using an old version of Internet Explorer! If possible, please move to some newer version of internet browsers (eg. Chrome, FireFox, >IE 10) to gain better performance and user experience when using the form.
        </div>

        <h1><span translate="Questionnaire-title"></span></h1>

        <div class="loading-box animate-show" ng-show="$parent.loadingTracker.active()">
            <img src="http://webq2test.eionet.europa.eu/images/loader.gif" width="60" height="60" /><br/>
        </div>
    <ul tabset ng-cloak ng-controller="TabController">
        <div ng-class="{'invalidTab' : isInvalidTab('BasicData')}" >
            <li tab heading="Basic Data" active="tabs[getTabIndex('BasicData')].active" ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="BasicData" novalidate>
                <h2><span translate="basicData"></span></h2>
                <table class="intro-table">
                    <tr>
                        <td><label class="<m></m>andatory"><span translate="memberState"></span> </label></td>
                        <td ng-show="!countryCodeBoolean ">
                            <select class="form-control" id="country" name="Country" ng-model="instance.LCPQuestionnaire.BasicData.MemberState"
                                    ng-options="status['@id'] as status.prefLabel[0]['@value'] for status in codeList.LCPCodelists.CountryCodeValue.concepts"
                                    required tooltip="{{'countryTooltip' | translate}}" ng-change="instance.LCPQuestionnaire.BasicData.State=instance.LCPQuestionnaire.BasicData.MemberState"></select>
                            <div class="invalid-msg" error-mapper watch-view="BasicData.Country" errors-to-show='["required"]'></div>
                        </td>
                        <td ng-show="countryCodeBoolean ">
                             <span ng-repeat="country in codeList.OldLCPCodelists.countries.concepts | filter:{'@id':memberStateValue.toUpperCase()}:true" ><!--| filter:{'notation':memberStateValue}:true -->
                                 <input style="padding-top: 0.3em;padding-bottom: 0.3em;" class="width30em readonly" type="text" name="memberState2" ng-readonly="true"
                                        value="{{country.prefLabel[0]['@value']}}"/>
                                </span>
                        </td>
                    </tr>
                    <tr>
                        <td><label  class="mandatory"  ><span translate="referenceYear"></span> </label></td>
                        <td><select class="form-control" name="ReportingYear" ng-model="instance.LCPQuestionnaire.BasicData.ReferenceYear" required
                                   ng-options="year for year in reportingYears" ng-disabled="false">
                                </select>
                                    
                            <div class="invalid-msg" error-mapper watch-view="BasicData.ReportingYear" errors-to-show='["required"]'></div>
                        </td>
                    </tr>
                    <tr>
                        <td><label  class="mandatory" ><span translate="numberOfPlants"></span> </label>
                            <div class="note"><span translate="note1"></span></div>
                        </td>
                        <td >
                            <input name="numberOfPlants" ng-model="instance.LCPQuestionnaire.BasicData.NumberOfPlants" type="text"
                                   ng-pattern="positiveIntegerPattern" required/>
                            <div class="invalid-msg" error-mapper watch-view="BasicData.numberOfPlants"
                                 errors-to-show='["required", "pattern_integer"]'></div>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="sub-header"><span translate="competentAuthority"></span>
                            <div class="note" style="font-weight: lighter; font-size: 0.9em;"><span translate="note2"></span></div></td>
                    </tr>

                    <tr>
                        <td><label ><span translate="organization"></span> </label></td>
                        <td>
                            <input type="text" name="organization"
                                   ng-model="instance.LCPQuestionnaire.BasicData.Organization"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label ><span translate="address1"></span> </label></td>
                        <td>
                            <input class="width30em" type="text" name="address1"
                                   ng-model="instance.LCPQuestionnaire.BasicData.Address1"/>
                        </td>
                    </tr>
                    
                    <tr>
                        <td><label ><span translate="city"></span> </label></td>
                        <td>
                            <input type="text" name="city"
                                   ng-model="instance.LCPQuestionnaire.BasicData.City"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label ><span translate="state"></span> </label></td>
                        <td>
                             <span ng-repeat="country in codeList.OldLCPCodelists.countries.concepts | filter:{'@id':instance.LCPQuestionnaire.BasicData.State.toUpperCase() || 'empty' }:true" >
                             <input class="width30em"  type="text" name="state2" ng-readonly="true" style="background-color: #eee;"
                                   value="{{country.prefLabel[0]['@value']}}"/>
                             </span>
                        </td>

                    </tr>
                    <tr>
                        <td><label ><span translate="postalCode"></span> </label></td>
                        <td>
                            <input type="text" name="postalCode"
                                   ng-model="instance.LCPQuestionnaire.BasicData.PostalCode"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label ><span translate="nameOfDepartmentContactPerson"></span> </label></td>
                        <td>
                            <input type="text" name="nameOfDepartmentContactPerson"
                                   ng-model="instance.LCPQuestionnaire.BasicData.NameOfDepartmentContactPerson"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label ><span translate="phone"></span> </label></td>
                        <td>
                            <input type="text" name="phone"
                                   ng-model="instance.LCPQuestionnaire.BasicData.Phone"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label class="mandatory"><span translate="eMail"></span> </label></td>
                        <td>
                            <input type="text" name="eMail"
                                   ng-model="instance.LCPQuestionnaire.BasicData.Email" required/>
                        </td>
                    </tr>
                </table>
                </div>
                <div class="menu-space"></div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('ListOfPlants')}" >
            <li tab heading="List of Plants" active="tabs[getTabIndex('ListOfPlants')].active"  ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="ListOfPlants" novalidate>
                    <h2><span translate="listOfPlants"></span></h2>
                    <button ng-click="openBulkEditListOfPlants('ListOfPlants');" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span translate="editAllRows"></span>
                    </button>
                    <button ng-click="closeBulkEditListOfPlants('ListOfPlants');" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>
                    <button ng-controller="ModalCtrl" ng-click="add('lg')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-plus-sign"></span>
                        <span translate="addNewPlant"></span>
                    </button>

                    <div id="handsonListOfPlants" ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'ListOfPlants'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                    <div ng-controller="PaginationCtrl"  ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="search" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0" >
                            <thead>
                            <tr>
                                <th rowspan="2"><span translate="delete"></span></th>
                                <th rowspan="2" class="mandatory table-first-column">
                                    <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                </th>
                                <th rowspan="2">
                                   <a href="" ng-click="setCriteria('PlantId')"><span   translate="plantId"></span></a>
                                </th>
                                <th rowspan="2">
                                   <a href="" ng-click="setCriteria('EPRTRNationalId')"><span   translate="EPRTRNationalId"></span></a>
                                </th>
                                <th colspan="6"><span translate="plantLocation"></span></th>
                                <th colspan="2"><span translate="geographicalCoordinate"></span></th>
                                <th rowspan="2">
                                    <a href="" ng-click="setCriteria('FacilityName')"><span translate="facilityName"></span></a>
                                </th>
                                <th rowspan="2">
                                    <a href="" ng-click="setCriteria('Comments')"><span translate="comments"></span></a>
                                </th>
                                <th rowspan="2"></th>
                            </tr>
                            <tr>
                                <th >
                                    <a href="" ng-click="setCriteria('PlantLocation.StreetName')"><span   translate="streetName"></span></a>
                                </th>
                                <th >
                                    <a href="" ng-click="setCriteria('PlantLocation.City')"><span  translate="city"></span></a>
                                </th>
                                <th>
                                    <a href="" ng-click="setCriteria('PlantLocation.Region')"><span   translate="region"></span></a>
                                </th>
                                <th >
                                    <a href="" ng-click="setCriteria('PlantLocation.PostalCode')"><span   translate="postalCode"></span></a>
                                </th>
                                <th >
                                    <a href="" ng-click="setCriteria('PlantLocation.CountryCode')"><span   translate="countryCode"></span></a>
                                </th>
                                <th >
                                    <a href="" ng-click="setCriteria('PlantLocation.BuildingNumber')"><span   translate="buildingNumber"></span></a>
                                </th>
                                <th class="mandatory">
                                    <a href="" ng-click="setCriteria('GeographicalCoordinate.Longitude')"><span   translate="longitude"></span></a>
                                </th>
                                <th class="mandatory">
                                    <a href="" ng-click="setCriteria('GeographicalCoordinate.Latitude')"><span   translate="latitude"></span></a>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr  ng-repeat="plant in filteredItems | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index" ng-form="ListOfPlantsTableForm" novalidate >
                                    <td class="center"><input type="checkbox" ng-model="plant.Delete" /></td>
                                    <td><span>{{plant.PlantName}}</span>

                                        <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                    </td>
                                    <td><span>{{plant.PlantId}}</span></td>
                                    <td><span>{{plant.EPRTRNationalId}}</span></td>
                                    <td><span>{{plant.PlantLocation.StreetName}}</span></td>
                                    <td><span>{{plant.PlantLocation.City}}</span></td>
                                    <td><span>{{plant.PlantLocation.Region}}</span>
                                    </td>
                                    <td><span>{{plant.PlantLocation.PostalCode}}</span></td>
                                    <td><span>{{plant.PlantLocation.CountryCode}}</span></td>
                                    <td><span>{{plant.PlantLocation.BuildingNumber}}</span></td>
                                    <td><span>{{plant.GeographicalCoordinate.Longitude}}</span>
                                        <span class="red" ng-show="isRequired(plant.GeographicalCoordinate.Longitude)" translate="required_field"> </span>
                                        <span  class="red" ng-show="isDegree(plant.GeographicalCoordinate.Longitude, 180, submitted)" translate="valid_longitude"></span>

                                    </td>
                                    <td><span>{{plant.GeographicalCoordinate.Latitude}}</span>
                                        <span class="red" ng-show="isRequired(plant.GeographicalCoordinate.Latitude)" translate="required_field">! </span>
                                        <span  class="red" ng-show="isDegree(plant.GeographicalCoordinate.Latitude, 90, submitted)"  translate="valid_latitude"></span>
                                    </td>
                                    <td><span>{{plant.FacilityName}}</span>
                                        <!-- <span class="red" ng-show="isRequired(plant.FacilityName)" translate="required_field">! </span> -->
                                    </td>
                                    <td><span>{{plant.Comments}}</span></td>
                                    <td style="white-space: nowrap;">
                                        <button type="button" class="btn btn-sm" ng-click="edit(plant, 'ListOfPlants')">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <span translate="edit"></span>
                                        </button>
                                        <button type="button" class="btn btn-sm" ng-click="remove(instance.LCPQuestionnaire.ListOfPlants.Plant, plant, true)">
                                            <span class="glyphicon glyphicon-remove-sign"></span>
                                            <span translate="delete"></span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div ng-show="!bulkEditListOfPlants">
                        <span ng-repeat="item in instance.LCPQuestionnaire.ListOfPlants.Plant| filter:{'Delete':true}:true" ng-show="$last">
                            <button ng-controller="PaginationCtrl" ng-click="deleteSelected(filteredItems)" class="btn btn-sm btn-danger">
                                <span class="glyphicon glyphicon-remove-sign"></span>
                                <span translate="deleteSelected"></span>
                            </button>
                            <br/><br/>
                        </span>
                    </div>
                    <div ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                        <button ng-click="openBulkEditListOfPlants('ListOfPlants')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                            <span class="glyphicon glyphicon-pencil"></span>
                            <span translate="editAllRows"></span>
                        </button>
                        <button ng-click="closeBulkEditListOfPlants('ListOfPlants')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span translate="editsDone"></span>
                        </button>
                        <button ng-controller="ModalCtrl" ng-click="openAdd()" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                            <span class="glyphicon glyphicon-plus-sign"></span>
                            <span translate="addNewPlant"></span>
                        </button>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants">
                        <script type="text/ng-template" id="ListOfPlantModalContent.html">
                            <div ng-form="modalListOfPlants" novalidate>
                                <div class="modal-header">

                                    <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                </div>
                                <div class="modal-body">
                                    <table   ng-class="{ 'submitted' : submitted }">
                                        <tr>
                                            <th class="mandatory" colspan="4">
                                                <span  translate="plantName" ></span>
                                            </th>
                                            <th class="width15">
                                                <span   translate="plantId"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td colspan="4"><input class="form-control" type="text" name="addPlantName"
                                                       ng-model="plant.PlantName" ng-required="true"/>
                                            </td>
                                            <td><input class="form-control" type="text" name="addPlantId"
                                                       ng-model="plant.PlantId" ng-disabled="false"/>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addPlantName"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <th colspan="5">
                                                <span   translate="EPRTRNationalId"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td class="width15">
                                                <input class="form-control" type="text" name="addEPRTRNationalId" ng-model="plant.EPRTRNationalId"/>
                                            </td>
                                            <td colspan="3">
                                                <button class="btn btn-sm btn-primary" ng-show="plant.EPRTRNationalId.length > 0" ng-click="loadDataFromEPRTR(plant)">
                                                    <span class="glyphicon glyphicon-refresh"></span>
                                                    <span translate="load_data_from_eprtr"></span>
                                                </button>
                                            </td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <th colspan="2">
                                                <span   translate="streetName"></span>
                                            </th>
                                            <th >
                                                <span  translate="city"></span>
                                            </th>
                                            <th>
                                                <span   translate="region"></span>
                                            </th>
                                            <th >
                                                <span   translate="postalCode"></span>
                                            </th>
                                            <th >
                                                <span   translate="countryCode"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td colspan="2"> <input class="form-control" type="text" name="addStreetName"
                                                                 ng-model="plant.PlantLocation.StreetName"/>
                                            </td>
                                            <td> <input class="form-control" type="text" name="addCity"
                                                              ng-model="plant.PlantLocation.City"/>
                                            </td>
                                            <td>
                                                <select class="form-control" name="addRegion" ng-model="plant.PlantLocation.Region"
                                                        ng-options="region['@id'] as region['@id'] + ' - ' + region.prefLabel[0]['@value'] for region in regionsCodelist.concepts"
                                                        ></select>
                                            </td>
                                            <td> <input class="form-control" type="text" name="addPostalCode"
                                                               ng-model="plant.PlantLocation.PostalCode"/>
                                            </td>
                                            <td> <input class="form-control" type="text" name="addCountryCode" placeholder="{{instance.LCPQuestionnaire.BasicData.MemberState}}"
                                                readonly        ng-model="plant.PlantLocation.CountryCode"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addStreetName"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                            <td>
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addCity"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                            <td>
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addRegion"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                            <td>
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addPostalCode"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                            <td>
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addCountryCode"
                                                     errors-to-show='["required"]'></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th colspan="5">
                                                <span   translate="BuildingNumber"></span>
                                            </th>
                                        </tr>
                                         <tr>
                                            <td class="width15">
                                                <input class="form-control" type="text" name="addBuildingNumber" ng-model="plant.PlantLocation.BuildingNumber"/>
                                            </td>
                                            </tr>
                                        <tr>
                                            <th class="mandatory">
                                                <span   translate="longitude"></span>
                                            </th>
                                            <th class="mandatory">
                                                <span   translate="latitude"></span>
                                            </th>
                                            <th colspan="3">
                                                <span translate="facilityName"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td> <input class="form-control" type="text" name="addLongitude" placeholder="{{plant.GeographicalCoordinate.Longitude}}"
                                                           ng-model="plant.GeographicalCoordinate.Longitude" ng-pattern="longitudeNumberPattern" required/>
                                            </td>
                                            <td> <input class="form-control" type="text" name="addLatitude" placeholder="{{plant.GeographicalCoordinate.Latitude}}"
                                                             ng-model="plant.GeographicalCoordinate.Latitude" ng-pattern="latitudeNumberPattern" required/>
                                            </td>
                                            <td colspan="3"> <input class="form-control" type="text" name="addFacilityName"
                                                             ng-model="plant.FacilityName" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="red" ng-show="(showErrorIfSubmitted(modalListOfPlants.addLongitude, 'required', submitted) && !editBoolean) || (showError(modalListOfPlants.addLongitude, 'required') && editBoolean)" translate="required_field"></span>
                                                <span class="red" ng-show="!showError(modalListOfPlants.addLongitude, 'required') && showError(modalListOfPlants.addLongitude, 'pattern')"  translate="valid_longitude">! </span>
                                            </td>
                                            <td>
                                                <span class="red" ng-show="(showErrorIfSubmitted(modalListOfPlants.addLatitude, 'required', submitted) && !editBoolean) || (showError(modalListOfPlants.addLatitude, 'required') && editBoolean)" translate="required_field"></span>
                                                <span class="red" ng-show="!showError(modalListOfPlants.addLatitude, 'required') && showError(modalListOfPlants.addLatitude, 'pattern')"  translate="valid_latitude">! </span>
                                            </td>
                                            <td colspan="3">
                                                <div class="invalid-msg" error-mapper watch-view="modalListOfPlants.addFacilityName" ></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th colspan="5">
                                                <span translate="comments"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td colspan="5">
                                                <textarea class="form-control" name="comments" ng-model="plant.Comments"></textarea>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="modal-footer">
                                    <!--<button class="btn btn-primary" ng-click="ok(plant)"><span translate="ok"></span></button>-->
                                    <button  class="btn btn-primary" type="button" ng-click="ok(plant)"><span translate="save"></span></button>
                                    <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                </div>
                            </div>
                        </script>
                    </div>
                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('PlantDetails')}">
            <li tab heading="Plant Details" active="tabs[getTabIndex('PlantDetails')].active" ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="PlantDetails" novalidate>

                <h2><span translate="plantDetails"></span></h2>
                <button ng-click="openBulkEditListOfPlants('PlantDetails')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                    <span class="glyphicon glyphicon-pencil"></span>
                    <span translate="editAllRows"></span>
                </button>
                <button ng-click="closeBulkEditListOfPlants('PlantDetails');" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                    <span class="glyphicon glyphicon-ok"></span>
                    <span translate="editsDone"></span>
                </button>

                <div ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'PlantDetails'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                <button ng-click="closeBulkEditListOfPlants('PlantDetails')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlant && instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                    <span class="glyphicon glyphicon-ok"></span>
                    <span translate="editsDone"></span>
                </button>


                    <div ng-controller="PaginationCtrl" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="searchPlantDetails" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="table-scroll">
                        <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                            <thead>
                            <tr>
                                <th rowspan="2" class="table-first-column,mandatory">
                                    <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                </th>
                                <th rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantId')"><span translate="plantId"></span></a>
                                </th>
                                <th class="mandatory" rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.MWth')"><span   translate="MWth"></span></a>
                                </th>
                                <th class="mandatory" rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.TypeOfCombustionPlant')"><span   translate="TypeOfCombustionPlant"></span></a>
                                </th>
                                <th class="mandatory" rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.DateOfStartOfOperation')"><span  translate="dateOfStartOfOperation"></span></a>
                                </th>
                                <th colspan="2">
                                    <span translate="sector"></span>
                                </th>
                                <th class="mandatory" rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.OperatingHours')"><span translate="operatingHours"></span></a>
                                </th>
                                <th  rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.Derogation')"><span translate="derogation"></span></a>
                                </th>
                                <th rowspan="2">
                                    <a href="" ng-click="setCriteria('PlantDetails.Comments')"><span translate="comments"></span></a>
                                </th>
                                <th rowspan="2"></th>
                            </tr>
                            <tr>
                                <th >
                                    <a href="" ng-click="setCriteria('Refineries')"><span translate="refineries"></span></a>
                                </th>
                                <th>
                                    <a href="" ng-click="setCriteria('OtherSector')"><span translate="OtherSector"></span></a>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="plant in filteredItems | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index">
                                <td id="byPlantName">{{ plant.PlantName }}
                                    <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                </td>
                                <td id="byPlantId">{{ plant.PlantId }}</td>

                                <td id="byMWth">{{ plant.PlantDetails.MWth }}
                                    <span class="red" ng-show="submitted == true && ( !isPositiveDecimal(plant.PlantDetails.MWth) || plant.PlantDetails.MWth < 50 ) ">MWth shoud be 50 or more</span>
                                </td>
                                <td id="byMWth">{{ plant.PlantDetails.TypeOfCombustionPlant }}
                                </td>
                                
                                <td id="byDateOfStartOfOperation">{{ plant.PlantDetails.DateOfStartOfOperation}}<!-- | date: YYYY-MM-DD -->
                                    <span class="red" ng-show="submitted == true &&  !validDateFormat( plant.PlantDetails.DateOfStartOfOperation )">Date format <b>must</b> be YYYY-MM-DD </span>

                                </td>
                                <td id="byRefineries">{{plant.PlantDetails.Refineries| true_false }}

                                </td>
                                  <td id="byOtherSector">{{plant.PlantDetails.OtherSector}}

                                </td>
                                <td id="byOperatingHours">{{ plant.PlantDetails.OperatingHours }}
                                    <span class="red" ng-show="isRequired(plant.PlantDetails.OperatingHours)"  translate="required_field">! </span>
                                </td>
                                <td id="byDerogation">{{ plant.PlantDetails.Derogation}}
                                </td>
                                <td id="byComments">{{ plant.PlantDetails.Comments }}
                                </td>
                                <td>
                                    <button type="button" class="btn btn-sm" ng-click="edit(plant, 'PlantDetails')">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                        <span translate="edit"></span>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                       </div>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants" >
                        <script type="text/ng-template" id="PlantDetailsModalContent.html">
                            <div ng-form="modalPlantDetails" novalidate>
                                <div class="modal-header">

                                    <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                </div>
                                <div class="modal-body">
                                    <table   ng-class="{ 'submitted' : submitted }">
                                        <tr class="border-bottom">
                                            <td colspan="2">
                                                <h4><span class="bold" translate="plantName" ></span>: {{plant.PlantName}}</h4>
                                            </td>

                                            <td colspan="2">
                                                <h4><span class="bold" translate="plantId"></span>: {{plant.PlantId}}</h4>
                                            </td>
                                            <td class="width15"></td>

                                        </tr>
                                        <tr>
                                            <th colspan="5" class="width15 mandatory" >
                                                <span  translate="MWth"></span>
                                            </th>
                                            
                                        </tr>
                                        <tr>
                                            <td> <input class="form-control" type="number" name="addMWth" min="50" placeholder="{{plant.PlantDetails.MWth}}"
                                                        ng-model="plant.PlantDetails.MWth" required/>
                                            </td>
                                            <td>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="red" ng-show="modalPlantDetails.addMWth.$dirty && modalPlantDetails.addMWth.$modelValue < 50 || modalPlantDetails.addMWth.$invalid">MWth should be a number of 50 or more</span>
                                            </td>
                                          
                                            <td>

                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="mandatory">
                                                <span  translate="typeOfCombustionPlant"></span>
                                            </th>
                                            <th  class="width15 mandatory" >
                                                <span  translate="FurtherDetails" ng-show="TypeOfCombustionPlantFurtherDetails"></span>
                                            </th>
                                            <th colspan="3"></th>
                                            </tr>
                                        <tr>
                                            <td> <select class="form-control" id="addTypeOfCombustionPlant" name="addTypeOfCombustionPlant" ng-model="plant.PlantDetails.TypeOfCombustionPlant"
                                              ng-change="isTypeOfCombustionPlantOther(plant)"      ng-options="status['@id']  as status.prefLabel[0]['@value'] | translate for status in codeList.CombustionPlantCodeLists.concepts"
                                                    tooltip="{{'statusTooltip' | translate}}">
                                                    <option value=""></option>
                                                 </select>
                                            </td>
                                            <td> <input class="form-control" type="text" name="AddOtherTypeOfCombustionPlant" 
                                                    ng-show="TypeOfCombustionPlantFurtherDetails"    ng-model="plant.PlantDetails.TypeOfCombustionPlantFurtherDetails" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="mandatory">
                                                <span   translate="dateOfStartOfOperation"></span>
                                            </th>
                                            <th></th>
                                            <th>
                                                <span  translate="refineries"></span>
                                            </th>
                                            <th colspan="2">
                                                <span translate="otherSector"></span>
                                            </th>
                                        </tr>
                                        
                                        <tr>
                                            <td> <input class="form-control" type="date" placeholder="yyyy-MM-dd" name="addDateOfStartOfOperation"
                                                  required    ng-model="plant.PlantDetails.DateOfStartOfOperation" />
                                            </td>
                                            <td></td>
                                            <td> <input class="form-control" type="checkbox" name="addRefineries" 
                                                        ng-model="plant.PlantDetails.Refineries" />
                                                        <!--ng-change="checkboxClearInputs(plant, 'PlantDetails.Refineries' , 'PlantDetails.OtherSector')"-->
                                            </td>
                                            <td  colspan="2">

                                                <select class="form-control" id="statusOfThePlantId" name="addOtherSector" ng-model="plant.PlantDetails.OtherSector" 
                                                        ng-options="sector['@id'] as plantDetailsOtherSectorFieldsView[sector['@id']] for sector in codeList.OldLCPCodelists.sectors.concepts"
                                                       tooltip="{{'sectorsTooltip' | translate}}">
                                                        <option value=""></option>
                                                       </select>
                                            </td>
                                        </tr>
                                    
                                       
                                       
                                        <tr>
                                           
                                            <th class="mandatory">
                                                <span translate="operatingHours"></span>
                                            </th>
                                            <th  colspan="2">
                                                <span translate="Derogation"></span>
                                            </th>
                                            <th colspan="2"></th>
                                        </tr>
                                        <tr>
                                      
                                            <td> <input class="form-control" type="number" name="addOperatingHours" ng-pattern="positiveIntegerPattern" placeholder="{{plant.PlantDetails.OperatingHours}}"
                                                    required    ng-model="plant.PlantDetails.OperatingHours" />
                                            </td>
                                            <td> <div multiselect class="multiselect" name="DerogationSelect" multiple="true"
                                                ng-model="plant.PlantDetails.Derogation"
                                                options="status['@id']  as status.prefLabel[0]['@value']  for status in codeList.DerogationValueCodeLists.concepts"
                                                change="selected()" ></div>
                                          </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="red" ng-show="showError(modalPlantDetails.addOperatingHours, 'required')" translate="required_field"></span>
                                                <span class="red" ng-show="!showError(modalPlantDetails.addOperatingHours, 'required') && ( showError(modalPlantDetails.addOperatingHours, 'number') || showError(modalPlantDetails.addOperatingHours, 'pattern') )"  translate="positive_integer">! </span>
                                            </td>
                                        </tr>
                                        
                                        
                                       
                                        <tr>
                                            <th colspan="5">
                                                <span translate="comments"></span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <td colspan="5"> <textarea class="form-control" name="addComments"
                                                        ng-model="plant.PlantDetails.Comments"  ></textarea>
                                            </td>
                                        </tr>
                                    </table>

                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" ng-click="ok(plant); ifFormIsValidSaveInstance(modalPlantDetails)"><span translate="save"></span></button>
                                    <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                </div>
                            </div>
                        </script>
                    </div>
                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('EnergyInput')}">
            <li tab heading="Energy Input" active="tabs[getTabIndex('EnergyInput')].active"  ng-disabled="bulkEditListOfPlants"  ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="EnergyInput" novalidate>

                    <h2><span translate="energyInput"></span></h2>

                    <button ng-click="openBulkEditListOfPlants('EnergyInput')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span translate="editAllRows"></span>
                    </button>
                    <button ng-click="closeBulkEditListOfPlants('EnergyInput')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>

                    <div ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'EnergyInput'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                    <button ng-click="closeBulkEditListOfPlants('EnergyInput')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlant && instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>


                    <div ng-controller="PaginationCtrl" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="searchEnergyInput" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                                <thead>
                                    <tr>
                                        <th rowspan="2" class="table-first-column">
                                            <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                        </th>
                                        <th rowspan="2">
                                            <a href="" ng-click="setCriteria('PlantId')"><span translate="plantId"></span></a>
                                        </th>
                                        <th colspan="8">
                                            <span   translate="energyInput"></span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass')"><span   translate="Biomass"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal')"><span   translate="Coal"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite')"><span   translate="Lignite"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat')"><span   translate="Peat"></span></a></th>
                                        <th  class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels')"><span   translate="otherSolidFuels"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels')"><span   translate="liquidFuels"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas')"><span   translate="naturalGas"></span></a></th>
                                        <th  class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases')"><span   translate="otherGases"></span></a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="plant in filteredItems | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index">
                                    <td id="byEnergyInputPlantName">{{ plant.PlantName }}
                                        <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                    </td>
                                    <td id="byEnergyInputPlantId">{{ plant.PlantId }}</td>
                                    <td id="byEnergyInputBiomass">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byEnergyInputCoal">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byEnergyInputLignite">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byEnergyInputPeat">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat)"  translate="positive_decimal">! </span>
                                    </td>

                                    <td id="byEnergyInputOtherSolidFuels">
                                            <div ng-repeat="OtherSolidFuel  in  plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel track by $index" >
                                                    {{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[$index].Category}}:   {{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[$index].Value}} 
                                                </div> 
                                        
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels)" translate="required_field">! </span>
                                    </td>
                                    <td id="byEnergyInputLiquidFuels">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byEnergyInputNaturalGas">{{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas}}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byEnergyInputOtherGases">
                                            <div ng-repeat="OtherGas  in  plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas track by $index" >
                                                    {{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas[$index].Category}}:   {{ plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas[$index].Value}} 
                                            </div> 
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases)" translate="required_field">! </span>
                                    </td>
                                   
                                    <td>
                                        <button type="button" class="btn btn-sm" ng-click="edit(plant, 'EnergyInput')">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <span translate="edit"></span>
                                        </button>
                                    </td>
                                </tr>
                                <tbody>
                            </table>
                        </div>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants" >
                        <script type="text/ng-template" id="EnergyInputModalContent.html">
                                <div ng-form="modalEnergyInput" novalidate>
                                    <div class="modal-header">

                                        <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                    </div>
                                    <div class="modal-body">
                                        <table   ng-class="{ 'submitted' : submitted }">
                                            <tr class="border-bottom">
                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantName" ></span>: {{plant.PlantName}}</h4>
                                                </td>

                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantId"></span>: {{plant.PlantId}}</h4>
                                                </td>
                                                <td class="width15"></td>

                                            </tr>
                                            <tr>
                                                <td colspan="5" class="center padding-top1 border-bottom">
                                                    <h4><span class="bold" translate="energyInput"></span></h4>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th class="width30 mandatory">
                                                    <span  translate="Biomass"></span>
                                                </th>
                                                <th class="width30 mandatory">
                                                    <span  translate="Coal"></span>
                                                </th>
                                                <th class="width30 mandatory">
                                                    <span  translate="Lignite"></span>
                                                </th>
                                                <th class="width30 mandatory">
                                                    <span  translate="Peat"></span>
                                                </th>
                                            </tr>

                                            <tr>
                                                <td> <input class="form-control" type="number" name="addBiomass" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass}}"
                                                             ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Biomass"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addCoal" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal}}"
                                                             ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Coal"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addLignite" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite}}"
                                                             ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Lignite"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addPeat" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat}}"
                                                             ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.Peat"  required/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addBiomass, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addBiomass, 'required') && showError(modalEnergyInput.addBiomass, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addCoal, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addCoal, 'required') && showError(modalEnergyInput.addCoal, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addLignite, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addLignite, 'required') && showError(modalEnergyInput.addLignite, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addPeat, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addPeat, 'required') && showError(modalEnergyInput.addPeat, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                            </tr>

                                            <tr>
                                                 <th  class="width15 mandatory">
                                                    <span  translate="naturalGas"></span>
                                                 </th>
                                                <th  class="width30 mandatory">
                                                    <span   translate="liquidFuels"></span>
                                                </th>
                                            </tr>
                                            <tr>

                                                <td> <input class="form-control" type="number" name="addNaturalGas" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.NaturalGas"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addLiquidFuels" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.LiquidFuels"  required/>
                                                </td>
                                            </tr>
                                              <tr>
                                                   <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addNaturalGas, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addNaturalGas, 'required') && showError(modalEnergyInput.addNaturalGas, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalEnergyInput.addLiquidFuels, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalEnergyInput.addLiquidFuels, 'required') && showError(modalEnergyInput.addLiquidFuels, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                            </tr>

                                             <tr>
                                                <th colspan="2" class="width15 mandatory">
                                                    <span  translate="otherSolidFuels"></span>
                                                </th>
                                                <th></th>
                                                <th></th>
                                            </tr>
                                             
                                            <!--tr>

                                                <td> <input class="form-control" type="number" name="addOtherSolidFuels" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[0].Value}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[1].Value"  required/>
                                                </td>  
                                                       <td>     <select class="form-control" id="addOtherSolidFuels" name="addOtherSolidFuels" ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels[1].Category"
                                                                     ng-options="status['@id']  as status.prefLabel[0]['@value'] | translate for status in codeList.OtherSolidFuelCodeLists.concepts"
                                                                      tooltip="{{'statusTooltip' | translate}}">
                                                                      <option value=""></option>
                                                                   </select>
                                                           
                                                </td>
                                                <td><button  type="button"ng-click="addOtherSolidFuel()" class="btn btn-default">Add</button>
                                                      </td>
                                            </tr-->
                                            <tr data-ng-repeat="OtherSolidFuel in plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel track by $index">
                                                <td> <input class="form-control" type="number" name="addOtherSolidFuels" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[$index].Value}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[$index].Value"  required/>
                                                </td>  
                                                       <td>     <select class="form-control" id="addOtherSolidFuels" name="addOtherSolidFuels" ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherSolidFuels.OtherSolidFuel[$index].Category"
                                                                     ng-options="status['@id']  as status.prefLabel[0]['@value'] | translate for status in codeList.OtherSolidFuelCodeLists.concepts"
                                                                      tooltip="{{'statusTooltip' | translate}}">
                                                                      <option value=""></option>
                                                                   </select>
                                                           
                                                </td>
                                                <td><button  type="button"ng-click="addOtherSolidFuel()" class="btn btn-default">Add</button>
                                                      </td>
                                                       <td><button  type="button"ng-click="removeOtherSolidFuel($index)" class="btn btn-default">Remove</button>
                                                      </td>
                                            </tr>

<!-- OTHER GASES-->
                                            <tr>
                                               
                                                 <th colspan="2" class="width30 mandatory">
                                                    <span   translate="otherGases"></span>
                                                </th>
                                                <th></th>
                                                <th></th>
                                            </tr>
                                            <tr data-ng-repeat="OtherGas in plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas track by $index">                                                
                                                <td> <input class="form-control" type="number" name="addOtherGases" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas[$index].Value}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas[$index].Value"  required/>
                                                </td>
                                                 <td>     <select class="width12 form-control" id="addOtherGasesousFuels" name="addOtherGasesousFuels" ng-model="plant.EnergyInputAndTotalEmissionsToAir.EnergyInput.OtherGases.OtherGas[$index].Category"
                                                    ng-options="status['@id']  as status.prefLabel[0]['@value'] | translate for status in codeList.OtherGasesousFuelCodeLists.concepts"
                                                     tooltip="{{'statusTooltip' | translate}}">
                                                     <option value=""></option>
                                                  </select>
                                                </td>
                                                    <td><button  type="button" ng-click="addOtherGas()" class="btn btn-default">Add</button>
                                                </td>
                                                <td><button  type="button" ng-click="removeOtherGas($index)" class="btn btn-default">Remove</button>
                                                </td>
                                            </tr>

                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <!--<button class="btn btn-primary" ng-click="ok(plant)"><span translate="ok"></span></button>-->
                                        <button class="btn btn-primary" type="button" ng-click="ok(plant); ifFormIsValidSaveInstance(modalEnergyInput)"><span translate="save"></span></button>
                                        <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                    </div>
                                </div>
                            </script>
                    </div>


                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('TotalEmissionsToAir')}">
            <li tab heading="Emissions" active="tabs[getTabIndex('TotalEmissionsToAir')].active"  ng-disabled="bulkEditListOfPlants"  ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="TotalEmissionsToAir" novalidate>

                    <h2><span translate="Emissions"></span></h2>

                    <button ng-click="openBulkEditListOfPlants('TotalEmissionsToAir')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span translate="editAllRows"></span>
                    </button>
                    <button ng-click="closeBulkEditListOfPlants('TotalEmissionsToAir')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>

                    <div ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'TotalEmissionsToAir'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                    <button ng-click="closeBulkEditListOfPlants('TotalEmissionsToAir')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlant && instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>


                    <div ng-controller="PaginationCtrl" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="searchTotalEmissionsToAir" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                                <thead>
                                    <tr>
                                        <th rowspan="2" class="table-first-column">
                                            <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                        </th>
                                        <th rowspan="2">
                                            <a href="" ng-click="setCriteria('PlantId')"><span translate="plantId"></span></a>
                                        </th>

                                        <th colspan="3">
                                            <span   translate="totalEmissionsToAir"></span>
                                        </th>
                                        <th rowspan="2"></th>
                                    </tr>
                                    <tr>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2')"><span   translate="SO2"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx')"><span   translate="NOx"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP')"><span   translate="dust"></span></a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="plant in filteredItems | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index">
                                    <td id="byEnergyInputPlantName">{{ plant.PlantName }}
                                        <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                    </td>
                                    <td id="byEnergyInputPlantId">{{ plant.PlantId }}</td>

                                    <td id="byTotalEmissionSO2">{{ plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2 }}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byTotalEmissionNOx">{{ plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx }}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td id="byTotalEmissionTSP">{{ plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP }}
                                        <span class="red" ng-show="isRequired(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-sm" ng-click="edit(plant, 'TotalEmissionsToAir')">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <span translate="edit"></span>
                                        </button>
                                    </td>
                                </tr>
                                <tbody>
                            </table>
                        </div>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants" >
                        <script type="text/ng-template" id="TotalEmissionsToAirModalContent.html">
                                <div ng-form="modalTotalEmissionsToAir" novalidate>
                                    <div class="modal-header">

                                        <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                    </div>
                                    <div class="modal-body">
                                        <table   ng-class="{ 'submitted' : submitted }">
                                            <tr class="border-bottom">
                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantName" ></span>: {{plant.PlantName}}</h4>
                                                </td>

                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantId"></span>: {{plant.PlantId}}</h4>
                                                </td>
                                                <td class="width15"></td>

                                            </tr>

                                            <tr>
                                                <td colspan="5" class="center border-bottom">
                                                    <h4><span class="bold" translate="totalEmissionsToAir"></span></h4>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th class="mandatory">
                                                    <span translate="SO2"></span>
                                                </th>
                                                <th class="mandatory">
                                                    <span  translate="NOx"></span>
                                                </th>
                                                <th class="mandatory">
                                                    <span  translate="dust"></span>
                                                </th>
                                                <th colspan="2"></th>
                                            </tr>
                                            <tr>
                                                <td> <input class="form-control" type="number" name="addSO2" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.SO2"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addNOx" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.NOx"  required/>
                                                </td>
                                                <td> <input class="form-control" type="number" name="addTSP" ng-pattern="positiveDecimalNumberPattern" placeholder="{{plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP}}"
                                                            ng-model="plant.EnergyInputAndTotalEmissionsToAir.TotalEmissionsToAir.TSP"  required/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="red" ng-show="showError(modalTotalEmissionsToAir.addSO2, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalTotalEmissionsToAir.addSO2, 'required') && showError(modalTotalEmissionsToAir.addSO2, 'pattern')"  translate="positive_decimal01">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalTotalEmissionsToAir.addNOx, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalTotalEmissionsToAir.addNOx, 'required') && showError(modalTotalEmissionsToAir.addNOx, 'pattern')"  translate="positive_decimal01">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalTotalEmissionsToAir.addTSP, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalTotalEmissionsToAir.addTSP, 'required') && showError(modalTotalEmissionsToAir.addTSP, 'pattern')"  translate="positive_decimal01">! </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <!--<button class="btn btn-primary" ng-click="ok(plant)"><span translate="ok"></span></button>-->
                                        <button class="btn btn-primary" type="button" ng-click="ok(plant); ifFormIsValidSaveInstance(modalTotalEmissionsToAir)"><span translate="save"></span></button>
                                        <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                    </div>
                                </div>
                            </script>
                    </div>


                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('Desulphurisation')}">
            <li tab heading="Desulphurisation Rate" active="tabs[getTabIndex('Desulphurisation')].active"  ng-disabled="bulkEditListOfPlants"  ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="Desulphurisation" novalidate>

                    <h2><span translate="Desulphurisation"></span></h2>

                    <!--button ng-click="openBulkEditListOfPlants('Desulphurisation')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span translate="editAllRows"></span>
                    </button>
                    <button ng-click="closeBulkEditListOfPlants('Desulphurisation')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>

                    <div ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'Desulphurisation'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                    <button ng-click="closeBulkEditListOfPlants('Desulphurisation')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlant && instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button-->


                    <div ng-controller="PaginationCtrl" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="searchDesulphurisation" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                                <thead>
                                    <tr>
                                        <th rowspan="2" class="table-first-column">
                                            <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                        </th>
                                        <th rowspan="2">
                                            <a href="" ng-click="setCriteria('PlantId')"><span translate="plantId"></span></a>
                                        </th>
                                        <th colspan="4">
                                            <span   translate="Desulphurisation  per Month"></span>
                                        </th>
                                        
                                    </tr>
                                    <tr>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('Desulphurisation.DesulphurisationRate')"><span   translate="DesulphurisationRate"></span></a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('Desulphurisation.SulphurContent')"><span   translate="SulphurContent"></span> </a></th>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('Desulphurisation.TechnicalJustification')"><span   translate="TechnicalJustification"></span> </a></th>
                                        <!--th class="mandatory"><a href="" ng-click="setCriteria('Desulphurisation.Month')"><span   translate="Month"></span></a></th-->

                                    </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="plant in filteredItems | filter:hasArticle31DerogationValue | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index">
                                    <td  id="byDesulphurisationPlantName">{{ plant.PlantName }}
                                        <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                    </td>
                                    <td  id="byDesulphurisationPlantId">{{ plant.PlantId }}</td>
                                    <td id="byDesulphurisationDesulphurisationRate">
                                         <div ng-repeat="(i,month)  in codeList.MonthValueCodeLists.concepts" ng-hide="!plant.Desulphurisation.Months.Month[i]">
                                             {{ plant.Desulphurisation.Months.Month[i].MonthValue}}:   {{ plant.Desulphurisation.Months.Month[i].DesulphurisationRate}} 
                                         </div> 
                                        <!--span class="red" ng-show="isRequired(plant.Desulphurisation.DesulphurisationRate)" translate="required_field">! </span-->
                                        <span class="red" ng-show="isDesulphurizationRateEmpty(plant.Desulphurisation)"  translate="required_field">! </span>
                                    </td>
                                    <td id="byDesulphurisationSulphurContent">
                                            <div ng-repeat="(i,month)  in codeList.MonthValueCodeLists.concepts" ng-hide="!plant.Desulphurisation.Months.Month[i]">
                                             {{ plant.Desulphurisation.Months.Month[i].MonthValue}}: {{ plant.Desulphurisation.Months.Month[i].SulphurContent}} 
                                                 </div> 
                                        <!--span class="red" ng-show="isRequired(plant.Desulphurisation.SulphurContent)" translate="required_field">! </span-->
                                        <span class="red" ng-show="isSulphurContentEmpty(plant.Desulphurisation)"  translate="required_field">! </span>
                                    </td>
                                    <td id="byDesulphurisationTechnicalJustification">
                                            <div ng-repeat="(i,month)  in codeList.MonthValueCodeLists.concepts" ng-hide="!plant.Desulphurisation.Months.Month[i]">
                                            {{ plant.Desulphurisation.Months.Month[i].MonthValue}}:   {{ plant.Desulphurisation.Months.Month[i].TechnicalJustification}} 
                                                 </div> 
                                        <!--span class="red" ng-show="isRequired(plant.Desulphurisation.TechnicalJustification)" translate="required_field">! </span-->
                                        <span class="red" ng-show="isTechnicalJustificationEmpty(plant.Desulphurisation)"  translate="required_field">! </span>
                                        
                                    </td>
                                    <!--td id="byDesulphurisationMonth">
                                            <div ng-repeat="(i,month)  in codeList.MonthValueCodeLists.concepts">
                                                    Month: {{ plant.Desulphurisation.Months.Month[i].MonthValue}} : {{ plant.Desulphurisation.Months.Month[i].SulphurContent}}
                                                 </div> 
                                        
                                        <span class="red" ng-show="isRequired(plant.Desulphurisation.Month)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.Desulphurisation.Month)"  translate="positive_decimal">! </span>
                                    </td-->
                                    <td>
                                        <button  type="button" class="btn btn-sm" ng-click="edit(plant, 'Desulphurisation')">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <span translate="edit"></span>
                                        </button>
                                    </td>

                                </tr>
                                <tbody>
                            </table>
                        </div>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants" >
                        <script type="text/ng-template" id="DesulphurisationModalContent.html">
                                <div ng-form="modalDesulphurisation" novalidate>
                                    <div class="modal-header">

                                        <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                    </div>
                                    <div class="modal-body">
                                        <table   ng-class="{ 'submitted' : submitted }">
                                            <tr class="border-bottom">
                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantName" ></span>: {{plant.PlantName}}</h4>
                                                </td>

                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantId"></span>: {{plant.PlantId}}</h4>
                                                </td>
                                                <td class="width15"></td>

                                            </tr>
                                            <tr>
                                                <td colspan="4" class="center padding-top1 border-bottom">
                                                    <h4><span class="bold" translate="Desulphurisation"></span></h4>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th class="width30 mandatory">
                                                    <span  translate="DesulphurisationRate"></span>
                                                </th>
                                                <th  class="width15 mandatory">
                                                    <span  translate="SulphurContent"></span>
                                                </th>
                                                <th  class="width30 mandatory">
                                                    <span   translate="TechnicalJustification"></span>
                                                </th>
                                                <th  class="width15 mandatory">
                                                    <span  translate="Month"></span>
                                                </th>

                                            </tr>

                                            <tr ng-repeat="(i,month)  in codeList.MonthValueCodeLists.concepts track by $index">
                                                  <!--ng-form name="DesulphurizationInnerForm"-->
                                                <td> <input class="form-control" type="number" name="addDesulphurisationRate"  ng-model="plant.Desulphurisation.Months.Month[i].DesulphurisationRate"
                                                placeholder="{{plant.Desulphurisation.Months.Month[i].DesulphurisationRate}}" required/>
                                                <!--span class="red" ng-show="showError(DesulphurizationInnerForm.addDesulphurisationRate, 'required')" translate="required_field"></span-->
                                                <!--span class="red" ng-show="!showError(DesulphurizationInnerForm.addDesulphurisationRate, 'required') && showError(DesulphurizationInnerForm.addDesulphurisationRate, 'pattern')"  translate="positive_decimal01">! </span-->
                                            </td>
                                                <td> <input class="form-control" type="number" name="addSulphurContent" ng-pattern="positiveDecimalNumberPattern" 
                                          ng-model="plant.Desulphurisation.Months.Month[i].SulphurContent" placeholder="{{plant.Desulphurisation.Months.Month[i].SulphurContent}}"  required/>
                                                </td>
                                                <td> <input class="form-control" type="text" name="addTechnicalJustification"   placeholder="{{plant.Desulphurisation.Months.Month[i].TechnicalJustification}}" 
                                           ng-model="plant.Desulphurisation.Months.Month[i].TechnicalJustification"   required/>
                                      
                                        </td>
                                                <td> 
                                                        <input class="width30em"  type="text" name="addDesulphurisationMonth" 
                                                        
                                                         ng-readonly="true" style="background-color: #eee;"
                                                        value="{{month.prefLabel[0]['@value'] }}"/>

                                                            <!--select class="width15 form-control" id="addDesulphurisationMonth" name="addDesulphurisationMonth" ng-model="plant.Desulphurisation.Month"
                                                            ng-options="status['@id']  as status.prefLabel[0]['@value'] | translate for status in codeList.MonthValueCodeLists.concepts"
                                                             tooltip="{{'statusTooltip' | translate}}">
                                                             <option value=""></option>
                                                          </select-->
                                                </td>
                                                <!--/ng-form-->
                                            </tr>
                                            <!--tr>
                                                <td>
                                                    <span class="red" ng-show="showError(modalDesulphurisation.addDesulphurisationRate, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalDesulphurisation.addDesulphurisationRate, 'required') && showError(modalDesulphurisation.addDesulphurisationRate, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                                <td>
                                                    <span class="red" ng-show="showError(modalDesulphurisation.addSulphurContent, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalDesulphurisation.addSulphurContent, 'required') && showError(modalDesulphurisation.addSulphurContent, 'pattern')"  translate="positive_decimal">! </span>
                                                </td>
                                           
                                            </tr-->
                                           
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <!--<button class="btn btn-primary" ng-click="ok(plant)"><span translate="ok"></span></button>-->
                                        <button class="btn btn-primary" type="button" ng-click="ok(plant); ifFormIsValidSaveInstance(modalDesulphurisation)"><span translate="save"></span></button>
                                        <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                    </div>
                                </div>
                            </script>
                    </div>


                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
        <div ng-class="{'invalidTab' : isInvalidTab('UsefulHeat')}">
            <li tab heading="Proportion of Useful Heat" active="tabs[getTabIndex('UsefulHeat')].active"  ng-disabled="bulkEditListOfPlants"  ng-controller="TabController" disabled="bulkEditListOfPlants == true">
                <div ng-form="UsefulHeat" novalidate>

                    <h2><span translate="UsefulHeat"></span></h2>

                    <button ng-click="openBulkEditListOfPlants('UsefulHeat')" class="btn btn-sm btn-primary" ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-pencil"></span>
                        <span translate="editAllRows"></span>
                    </button>
                    <button ng-click="closeBulkEditListOfPlants('UsefulHeat')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>

                    <div ui-handsontable data="instance.LCPQuestionnaire.ListOfPlants.Plant" formname="'UsefulHeat'" status="bulkEditListOfPlants" ng-show="bulkEditListOfPlants" class="handsontable"></div>

                    <button ng-click="closeBulkEditListOfPlants('UsefulHeat')" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlant && instance.LCPQuestionnaire.ListOfPlants.Plant.length > 20">
                        <span class="glyphicon glyphicon-ok"></span>
                        <span translate="editsDone"></span>
                    </button>


                    <div ng-controller="PaginationCtrl" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                        <div class="row " ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0">
                            <div class="col-md-8 pagination">
                                <button type="button" class="btn btn-sm pagination-button" ng-class="prevPageDisabled()" ng-click="prevPage()"><span translate="prev"></span></button>
                                <button ng-repeat="n in range()" type="button" class="btn btn-sm pagination-button" ng-class="{active: n == currentPage}" ng-click="setPage(n)">{{n+1}}</button>
                                <button type="button" class="btn btn-sm pagination-button" ng-class="nextPageDisabled()" ng-click="nextPage()"><span translate="next"></span></button>
                                {{(currentPage + 1) + '/' + (pageCount() + 1)}}
                            </div>
                            <div class="col-md-4 right">
                                <div class="input-group">
                                    <input class="form-control search" name="SearchText" ng-model="searchText" type="text" id="searchUsefulHeat" placeholder="Search ...">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="table-scroll">
                            <table class="table table-hover table-bordered datatable" ng-show="instance.LCPQuestionnaire.ListOfPlants.Plant.length > 0 && !bulkEditListOfPlants">
                                <thead>
                                    <tr>
                                        <th rowspan="2" class="table-first-column">
                                            <a href="" ng-click="setCriteria('PlantName')"><span  translate="plantName" ></span></a>
                                        </th>
                                        <th rowspan="2">
                                            <a href="" ng-click="setCriteria('PlantId')"><span translate="plantId"></span></a>
                                        </th>
                                        <th colspan="1">
                                            <span   translate="UsefulHeat"></span>
                                        </th>
                                        <th rowspan="2"></th>
                                    </tr>
                                    <tr>
                                        <th class="mandatory"><a href="" ng-click="setCriteria('UsefulHeat.UsefulHeatProportion')"><span   translate="UsefulHeat"></span></a></th>
                                    </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="plant in filteredItems | filter:hasArticle35DerogationValue | orderObjectBy : criteria : direction | offset: currentPage*itemsPerPage | limitTo: itemsPerPage track by $index">
                                    <td id="byUsefulHeatPlantName">{{ plant.PlantName }}
                                        <span class="red" ng-show="isRequired(plant.PlantName)" translate="required_field">! </span>
                                    </td>
                                    <td id="byUsefulHeatPlantId">{{ plant.PlantId }}</td>
                                    <td id="byUsefulHeatProportion">{{ plant.UsefulHeat.UsefulHeatProportion}}
                                        <span class="red" ng-show="isRequired(plant.UsefulHeat.UsefulHeatProportion)" translate="required_field">! </span>
                                        <span class="red" ng-show="submitted == true && !isPositiveDecimal(plant.UsefulHeat.UsefulHeatProportion)"  translate="positive_decimal">! </span>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-sm" ng-click="edit(plant, 'UsefulHeat')">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                            <span translate="edit"></span>
                                        </button>
                                    </td>
                                </tr>
                                <tbody>
                            </table>
                        </div>
                    </div>
                    <div ng-controller="ModalCtrl" ng-show="!bulkEditListOfPlants" >
                        <script type="text/ng-template" id="UsefulHeatModalContent.html">
                                <div ng-form="modalUsefulHeat" novalidate>
                                    <div class="modal-header">

                                        <h3 class="modal-title"><span ng-show="!editBoolean" translate="addPlant"></span><span ng-show="editBoolean" translate="editPlant"></span></h3>

                                    </div>
                                    <div class="modal-body">
                                        <table   ng-class="{ 'submitted' : submitted }">
                                            <tr class="border-bottom">
                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantName" ></span>: {{plant.PlantName}}</h4>
                                                </td>

                                                <td colspan="2">
                                                    <h4><span class="bold" translate="plantId"></span>: {{plant.PlantId}}</h4>
                                                </td>
                                                <td class="width15"></td>

                                            </tr>
                                            <tr>
                                                <td colspan="1" class="center padding-top1 border-bottom">
                                                    <h4><span class="bold" translate="UsefulHeat"></span></h4>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th class="width30 mandatory">
                                                    <span  translate="UsefulHeatProportion"></span>
                                                </th>
                                            </tr>
                                            <tr>
                                                <td> <input class="form-control" type="number" name="addUsefulHeatProportion" ng-pattern="binaryNumberPattern" placeholder="{{plant.UsefulHeat.UsefulHeatProportion}}"
                                                             ng-model="plant.UsefulHeat.UsefulHeatProportion"  min="0" max="1" required/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="red" ng-show="showError(modalUsefulHeat.addUsefulHeatProportion, 'required')" translate="required_field"></span>
                                                    <span class="red" ng-show="!showError(modalUsefulHeat.addUsefulHeatProportion, 'required') && showError(modalUsefulHeat.addUsefulHeatProportion, 'pattern')"  translate="positive_decimal01">! </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="modal-footer">
                                        <!--<button class="btn btn-primary" ng-click="ok(plant)"><span translate="ok"></span></button>-->
                                        <button class="btn btn-primary" type="button" ng-click="ok(plant); ifFormIsValidSaveInstance(modalUsefulHeat)"><span translate="save"></span></button>
                                        <button class="btn btn-default" ng-click="cancel()"><span translate="cancel"></span></button>
                                    </div>
                                </div>
                            </script>
                    </div>


                    <div class="menu_space"></div>
                </div>
            </li>
        </div>
       
    </ul>

        </div>
        <div notifications="bottom right"></div>
        <div class="col-md-11 menu-buttons">
            <div>
                <div style="float:left" >
                    <input type="button" ng-click="showMenu = !showMenu" value="{{showMenu ? '<' : '>'}}" class="btn btn-sm {{showMenu ? 'btn-default' : 'btn-success'}} menu-button" ng-init="showMenu=true" title="{{showMenu ? 'Hide menu' : 'Show menu'}}">
                </div>
                <div class=" animate-show" ng-show="showMenu" style="float:left">
                    <button type="button" ng-click="saveInstance()" class="btn btn-sm btn-success"><span translate="save"></span></button>
                    <button type="button" ng-click="close()" class="btn btn-sm btn-primary"><span translate="close"></span></button>
                    <button type="button" ng-show="submitted && bulkEditListOfPlants == false" ng-click="validationOnOff()" class="btn btn-sm btn-primary"><span  translate="validationOff"></span></button>
                    <button type="button" ng-show="!submitted && bulkEditListOfPlants == false"  ng-click="validationOnOff()" class="btn btn-sm btn-primary"><span  translate="validationOn"></span></button>
                    <button type="button" ng-click="printPreview()" class="btn btn-sm btn-primary" ng-show="bulkEditListOfPlants == false"><span translate="printPreview"></span></button>
                </div>
                <div class="animate-show" ng-show="showMenu" style="float:right" ng-controller="TabController">
                    <button type="button" ng-click="previousTab()" class="btn btn-sm btn-primary" ng-disabled="getActiveTabIndex() == 0"  ng-show="!bulkEditListOfPlants">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span>Prev</span>
                    </button>
                    <button type="button" ng-click="nextTab()" class="btn btn-sm btn-primary" ng-disabled="getActiveTabIndex() == (tabs.length - 1)" ng-show="!bulkEditListOfPlants">
                        <span>Next</span>
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="row span12" style="display:none">
            <h4>DEBUG area</h4>
        </div>
        </div> <!-- workarea -->
        <div class="menu-space" ></div>

        <div id="pagefoot" class="animate-show" ng-show="showMenu">
            <p><a href="http://www.eea.europa.eu/"><b>European Environment Agency</b></a> | Kgs. Nytorv 6, DK-1050 Copenhagen K, Denmark - Phone: +45 3336 7100</p>
        </div>

    </div> <!-- container -->
</body>
</html>
